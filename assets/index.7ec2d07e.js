import{d as $,h as B,l as C,y as s,P as f,J as I,_ as x,r as z,M as b,N as S,Z as y,$ as m,a0 as _,a1 as p,O as d,G as A,S as N,j as V,X as g,W as v,Y as T,U as M,a2 as U,a3 as E}from"./index.fc0e2afd.js";import{N as R}from"./index.c57e1302.js";import{r as D,l as F}from"./user.b36f1c33.js";import{B as P}from"./index.ddb97a99.js";import"./use-placeholder.8dc646e9.js";import"./use-route.f6be4a4d.js";const[h,j]=$("space"),G={align:String,direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:8},wrap:Boolean,fill:Boolean};function k(e=[]){const a=[];return e.forEach(n=>{Array.isArray(n)?a.push(...n):n.type===f?a.push(...k(n.children)):a.push(n)}),a.filter(n=>{var i;return!(n&&(typeof Comment<"u"&&n.type===Comment||n.type===f&&((i=n.children)==null?void 0:i.length)===0||n.type===Text&&n.children.trim()===""))})}var J=B({name:h,props:G,setup(e,{slots:a}){const n=C(()=>{var t;return(t=e.align)!=null?t:e.direction==="horizontal"?"center":""}),i=t=>typeof t=="number"?t+"px":t,r=t=>{const o={},u=`${i(Array.isArray(e.size)?e.size[0]:e.size)}`,l=`${i(Array.isArray(e.size)?e.size[1]:e.size)}`;return t?e.wrap?{marginBottom:l}:{}:(e.direction==="horizontal"&&(o.marginRight=u),(e.direction==="vertical"||e.wrap)&&(o.marginBottom=l),o)};return()=>{var t;const o=k((t=a.default)==null?void 0:t.call(a));return s("div",{class:[j({[e.direction]:e.direction,[`align-${n.value}`]:n.value,wrap:e.wrap,fill:e.fill})]},[o.map((u,l)=>s("div",{key:`item-${l}`,class:`${h}-item`,style:r(l===o.length-1)},[u]))])}}});const L=I(J);const O={class:"login"},W={__name:"login_form",props:{type:{type:String,default:"login"}},emits:["submit"],setup(e,{emit:a}){const n=e,i=z({email:"",username:"",password:""});function r(){a("submit",{type:n.type,...i})}return(t,o)=>{const u=P,l=L;return b(),S("div",O,[s(l,{size:16,direction:"vertical",fill:""},{default:y(()=>[m(d("input",{class:"login_input","onUpdate:modelValue":o[0]||(o[0]=c=>i.email=c),"aria-invalid":"true",autocomplete:"off",name:"account",placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1",type:"email"},null,512),[[_,e.type==="register"],[p,i.email]]),m(d("input",{class:"login_input","onUpdate:modelValue":o[1]||(o[1]=c=>i.username=c),"aria-invalid":"true",autocomplete:"off",name:"account",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",type:"text"},null,512),[[p,i.username]]),m(d("input",{class:"login_input","onUpdate:modelValue":o[2]||(o[2]=c=>i.password=c),"aria-invalid":"true",autocomplete:"off",name:"account",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",type:"password"},null,512),[[p,i.password]]),s(u,{class:"login_button",type:"primary",onClick:r,round:"",block:""},{default:y(()=>[A(N(e.type==="login"?"\u767B\u5F55":"\u6CE8\u518C"),1)]),_:1})]),_:1})])}}},w=x(W,[["__scopeId","data-v-f53944e1"]]);const X=e=>(U("data-v-4f48924f"),e=e(),E(),e),Y={class:"login_logo"},Z=X(()=>d("div",null,"iChat \u4E00\u6B3E\u804A\u5929\u5E94\u7528",-1)),q={__name:"index",setup(e){const a=V("login"),n=r=>{a.value=r},i=async r=>{if(!r.username||!r.password){await g("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u7528\u6237\u6216\u5BC6\u7801");return}g.loading({message:"",forbidClick:!0});let t=null;r.type==="register"?t=await D(r):t=await F(r),v.setItem("userInfo",t.data),v.setItem("token",t.data.token),g.clear(),T.push("/")};return(r,t)=>{const o=R,u=M;return b(),S(f,null,[s(o,{"left-arrow":a.value!=="login",title:a.value==="login"?"\u767B\u5F55":"\u6CE8\u518C","right-text":a.value==="login"?"\u6CE8\u518C":"",onClickLeft:t[0]||(t[0]=l=>n("login")),onClickRight:t[1]||(t[1]=l=>n("register")),border:!1},null,8,["left-arrow","title","right-text"]),d("div",Y,[s(u,{class:"logo",width:"58",height:"58",src:"icon.svg"}),Z]),m(s(w,{onSubmit:i,key:"login",type:a.value},null,8,["type"]),[[_,a.value==="login"]]),m(s(w,{onSubmit:i,key:"register",type:a.value},null,8,["type"]),[[_,a.value==="register"]])],64)}}},ae=x(q,[["__scopeId","data-v-4f48924f"]]);export{ae as default};
