import{c as T,e as I,m as C,t as U,d as $,r as v,u as L,a as c,p as x,b as O,f as j,w as K,o as p,g as _,h,i as d,F as V,j as q,k as z,l as G,n as H}from"./index.b483750b.js";import"./index.3e0cdaa0.js";import{f as S,F as J}from"./index.df6280c7.js";import{s as M}from"./user.7bdab6e8.js";import{o as Q}from"./user.8e1535c3.js";import{d as W}from"./index.1e454d50.js";import{_ as X}from"./_plugin-vue_export-helper.cdc0426e.js";import{u as Y}from"./use-id.ee9cfef0.js";import"./use-route.780f62c1.js";const[Z,r,ee]=T("search"),ne=I({},S,{label:String,shape:C("square"),leftIcon:C("search"),clearable:U,actionText:String,background:String,showAction:Boolean});var oe=$({name:Z,props:ne,emits:["blur","focus","clear","search","cancel","click-input","click-left-icon","click-right-icon","update:modelValue"],setup(a,{emit:n,slots:o,attrs:f}){const i=Y(),s=v(),l=()=>{o.action||(n("update:modelValue",""),n("cancel"))},m=e=>{e.keyCode===13&&(j(e),n("search",a.modelValue))},u=()=>a.id||`${i}-input`,t=()=>{if(o.label||a.label)return c("label",{class:r("label"),for:u()},[o.label?o.label():a.label])},b=()=>{if(a.showAction){const e=a.actionText||ee("cancel");return c("div",{class:r("action"),role:"button",tabindex:0,onClick:l},[o.action?o.action():e])}},k=()=>{var e;return(e=s.value)==null?void 0:e.blur()},y=()=>{var e;return(e=s.value)==null?void 0:e.focus()},E=e=>n("blur",e),w=e=>n("focus",e),F=e=>n("clear",e),B=e=>n("click-input",e),N=e=>n("click-left-icon",e),P=e=>n("click-right-icon",e),A=Object.keys(S),R=()=>{const e=I({},f,x(a,A),{id:u()}),g=D=>n("update:modelValue",D);return c(J,O({ref:s,type:"search",class:r("field"),border:!1,onBlur:E,onFocus:w,onClear:F,onKeypress:m,"onClick-input":B,"onClick-left-icon":N,"onClick-right-icon":P,"onUpdate:modelValue":g},e),x(o,["left-icon","right-icon"]))};return L({focus:y,blur:k}),()=>{var e;return c("div",{class:r({"show-action":a.showAction}),style:{background:a.background}},[(e=o.left)==null?void 0:e.call(o),c("div",{class:r("content",a.shape)},[t(),R()]),b()])}}});const ae=K(oe);const te={action:"/"},ce={class:"search_list"},se=["onClick"],le={class:"username van-hairline--bottom"},re={__name:"index",setup(a){const n=v(""),o=v([]),f=z(),i=W(function(){!n.value||M({username:n.value}).then(s=>{o.value=s.data.list})},300);return(s,l)=>{const m=ae,u=H("user-avatar");return p(),_(V,null,[h("form",te,[c(m,{modelValue:n.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>n.value=t),d(i)],placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D","show-action":"",autofocus:"",onSearch:d(i),onCancel:l[1]||(l[1]=t=>d(f).push("/message"))},null,8,["modelValue","onSearch","onUpdate:modelValue"])]),h("ul",ce,[(p(!0),_(V,null,q(o.value,(t,b)=>(p(),_("li",{onClick:k=>d(Q)(t._id)},[c(u,{round:"",class:"image",name:t.username},null,8,["name"]),h("div",le,G(t.username),1)],8,se))),256))])],64)}}},be=X(re,[["__scopeId","data-v-992c0b77"]]);export{be as default};
